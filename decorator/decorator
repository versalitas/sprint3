const fs = require('fs');
const filePath = './currency_conversions.json';
const filePath2 = './products.json';

//decorator understood as a wrapper around some code
//the code for unpacking the currency rate is enhanced with the
// ability to convert currency
//unpacking the products JSON
function unPackJSON(){
    const productsJSON = fs.readFileSync(filePath2, {encoding: 'utf8', flag: 'r'});
    const productArray = JSON.parse(productsJSON);
    return productArray;
}


function convertToEuro(price, currency){
    const currencyJSON = fs.readFileSync(filePath, {encoding: 'utf8', flag: 'r'});
    const currencyRate = JSON.parse(currencyJSON);
    const actualRate = currencyRate[currency + '_EU'];
    return actualRate * price;
   }
 

 module.exports.convertToEuro = convertToEuro();
 module.exports.unPackJSON = unPackJSON();
            
